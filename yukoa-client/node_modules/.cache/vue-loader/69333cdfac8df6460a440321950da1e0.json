{"remainingRequest":"/Users/yuhior/study/koa2/yuKoa-client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuhior/study/koa2/yuKoa-client/src/components/RegisterForm.vue?vue&type=style&index=0&id=6626deb7&lang=less&scoped=true&","dependencies":[{"path":"/Users/yuhior/study/koa2/yuKoa-client/src/components/RegisterForm.vue","mtime":1600501568792},{"path":"/Users/yuhior/study/koa2/yuKoa-client/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhior/study/koa2/yuKoa-client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yuhior/study/koa2/yuKoa-client/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yuhior/study/koa2/yuKoa-client/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhior/study/koa2/yuKoa-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuhior/study/koa2/yuKoa-client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnJlZ2lzdGVyZm9ybV9jb250YWluZXJ7CiAgICBwYWRkaW5nOiAwIDQwcHg7CiAgICAucmVnaXN0ZXJmb3JtX2JvdHRvbXsKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgfQp9Cg=="},{"version":3,"sources":["RegisterForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RegisterForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"registerform_container\">\n    <el-form ref=\"form\" :model=\"form\" :rules=\"rules\"  label-width=\"20px\">\n        <el-form-item label=\"\" prop=\"alias_name\">\n            <el-input v-model=\"form.alias_name\" placeholder=\"请输入昵称\" prefix-icon=\"el-icon-user\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"\" prop=\"mobile\">\n            <el-input v-model=\"form.mobile\" placeholder=\"请输入手机号\" prefix-icon=\"el-icon-mobile\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"\"  prop=\"password\">\n            <el-input v-model=\"form.password\" show-password placeholder=\"请输入密码\" prefix-icon=\"el-icon-lock\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"\" prop=\"confirmPassword\">\n            <el-input v-model=\"form.confirmPassword\" show-password placeholder=\"确认密码\" prefix-icon=\"el-icon-lock\"></el-input>\n        </el-form-item>\n        <el-form-item>\n            <el-input v-model=\"form.value\" prefix-icon=\"el-icon-key\" placeholder=\"输入手机验证码\" style=\"width:280px\"></el-input>\n            <el-button style=\"margin-left:10px;width:110px\">发送验证码</el-button>\n        </el-form-item>\n        <el-form-item>\n            <el-button type=\"primary\" style=\"width:300px\"  @click=\"onSubmit('form')\">注册</el-button>\n        </el-form-item>\n        <div class=\"registerform_bottom\">\n            <span @click=\"historyBack\">返回</span>\n            <span>登陆</span>\n        </div>\n    </el-form>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: [\"schoolType\"],\n  data() {\n    var validatePass = (rule, value, callback) => {\n        //console.log(value)\n    if (value === '') {\n        callback(new Error('请输入密码'));\n    } else {\n        if (this.form.confirmPassword !== '') {\n            //console.log(this.$refs.form)\n            this.$refs.form.validateField('confirmPassword');\n        }\n        callback();\n    }\n    };\n    var validatePass2 = (rule, value, callback) => {\n        console.log(value)\n        if (value === '') {\n            callback(new Error('请再次输入密码'));\n        } else if (value !== this.form.password) {\n            callback(new Error('两次输入密码不一致!'));\n        } else {\n            callback();\n        }\n    };\n    return {\n        form: {\n          alias_name: '',\n          password: '',\n          mobile:'',\n          confirmPassword: '',\n          date2: '',\n          delivery: false,\n          type: [],\n          resource: '',\n          desc: '',\n          mobileVerification:''\n        },\n        rules: {\n            alias_name: [\n                { required: true, message: '请输入昵称', trigger: 'blur' },\n                { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }\n            ],\n            password: [\n               { validator: validatePass, trigger: 'blur' }\n            ],\n            mobile: [\n                { required: true, message: '输入手机号', trigger: 'blur' }\n            ],\n            confirmPassword: [\n                { validator: validatePass2, trigger: 'blur' }\n            ]\n        }\n    };\n  },\n  methods:{\n      onSubmit(formName){\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n            this.$api.Register({\n                alias_name:this.form.alias_name,\n                password:this.form.password,\n                mobile:this.form.mobile,\n                school_type:this.schoolType\n            }).then((res) => {\n                console.log(res);\n            }).catch((err) => {\n                console.log(err)\n            })\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n       \n      }, \n      historyBack(){\n            if (window.history.length<=1) {\n                this.$router.push({path:'/'})\n                return false\n            }else{\n                this.$router.go(-1);\n            }\n            // 上边都没有执行就说明卡在当前页 也不是最后一条，history记录数量大于1 又没有回退记录只能返回首页\n            // setTimeout(()=>{\n            //     this.$router.push({path:'/'})\n            // },1000)\n        },\n  },\n  mounted() {\n    if (!this.schoolType) {\n      this.$router.push(\"./\");\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.registerform_container{\n    padding: 0 40px;\n    .registerform_bottom{\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n    }\n}\n</style>"]}]}